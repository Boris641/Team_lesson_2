

1 при новом заказе обязательно указываем ресторан
при этом статус становиться в Корзине
2 В одном заказе могут быть блюда только одного ресторана
3 Заказ нельзя перевести из статуса в Корзине если нет строк заказа.
4.При изменении статуса заказа Заказ сохраняетс в БД
5 Заказ может быть отменен если он еще не оплачен.


Сценарий при безналичной оплате
Статусы
0.Статус=Корзина
1.Кнопка(команда) безнал оплата
при этом проверка что есть хоть одно блюдо.
и записываем в историю четыре статуса
Статус=сформирован
Статус=БезНал_к_оплате
Статус=БезНал_оплачено
Статус=Доставляется

При прибытии доставке заказа
Пользователь нажимает кнопку Доставлен
и записываем в историю два статуса
Статус=Доставен
Статус=Завершен

Сценарий при наличной оплате
0.Статус=Корзина
1.Кнопка(команда) нал оплата
при этом проверка что есть хоть одно блюдо.
и записываем в историю два статуса
Статус=сформирован
Статус=Доставляется
При прибытии доставке заказа
Пользователь нажимает кнопку Оплатить нал
и записываем в историю четыре статуса
Статус=Доставен
Статус=Нал_к_оплате
Статус=Нал_оплачено
Статус=Завершен


======================================
Все значения поля Статус ( таблица Заказ ) :


Корзина
Сформирован
БезНал_к_оплате
БезНал_оплачено
Нал_к_оплате
Нал_оплачено
Доставляется
Доставлен
Завершен

Отказ